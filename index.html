<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Roguelike Prototype</title>
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #1e1e1e;
    color: #eee;
  }

  .screen {
    display: none;
    height: 100vh;
    width: 100vw;
  }

  .active {
    display: flex;
  }

  /* LOGIN */
  #loginScreen {
    justify-content: center;
    align-items: center;
    flex-direction: column;
    gap: 12px;
  }

  input, button {
    padding: 10px 14px;
    font-size: 16px;
  }

  /* CHARACTER SELECT */
  #characterSelectScreen {
    flex-direction: column;
    padding: 20px;
    gap: 20px;
  }

  .cardRow {
    display: flex;
    gap: 20px;
  }

  .charCard {
    background: #2a2a2a;
    border: 2px solid #555;
    border-radius: 8px;
    padding: 16px;
    width: 220px;
    cursor: pointer;
  }

  .charCard:hover {
    border-color: #aaa;
  }

  .charName {
    font-size: 20px;
    font-weight: bold;
  }

  .controls {
    display: flex;
    gap: 10px;
  }

  /* GAME UI */
  #gameScreen {
    display: grid;
    grid-template-columns: 300px 1fr 300px;
    grid-template-rows: 1fr;
    height: 100vh;
  }

  .leftPanel {
    border-right: 2px solid #444;
    padding: 10px;
    display: grid;
    grid-template-rows: 200px 1fr 200px;
    gap: 10px;
  }

  .rightPanel {
    border-left: 2px solid #444;
    padding: 10px;
  }

  .centerPanel {
    padding: 10px;
  }

  .charInfo {
    border: 2px solid #444;
    padding: 10px;
  }

  .portrait {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background: #666;
    margin-bottom: 10px;
  }

  .bar {
    background: #333;
    border: 1px solid #555;
    height: 16px;
    margin-bottom: 6px;
    position: relative;
  }

  .barFill {
    height: 100%;
    background: #4caf50;
  }

  .mana { background: #2196f3; }
  .damage { background: #f44336; }
  .resist { background: #9c27b0; }

  .sectionBox {
    border: 2px solid #444;
    padding: 10px;
  }

  .log {
    font-size: 14px;
    line-height: 1.4;
    max-height: 100%;
    overflow-y: auto;
  }
</style>
</head>
<body>

<!-- LOGIN SCREEN -->
<div id="loginScreen" class="screen active">
  <h1>Oyuna Hoş Geldin</h1>
  <input id="playerNameInput" placeholder="Karakter adını gir" />
  <button id="startBtn">Başla</button>
</div>

<!-- CHARACTER SELECT SCREEN -->
<div id="characterSelectScreen" class="screen">
  <h2>Karakterini Seç</h2>
  <div class="cardRow" id="cardRow"></div>
  <div class="controls">
    <button id="rerollBtn">Yenile (1 hak)</button>
  </div>
</div>

<!-- GAME SCREEN -->
<div id="gameScreen" class="screen">
  <div class="leftPanel">
    <!-- TOP LEFT: CHARACTER INFO -->
    <div class="charInfo">
      <div class="portrait" id="portrait"></div>
      <div id="gameTitle">Oyun Adı</div>
      <div id="charName">Karakter</div>

      <div>Can</div>
      <div class="bar"><div class="barFill" id="hpBar"></div></div>

      <div>Mana</div>
      <div class="bar"><div class="barFill mana" id="manaBar"></div></div>

      <div>Hasar</div>
      <div class="bar"><div class="barFill damage" id="dmgBar"></div></div>

      <div>Direnç</div>
      <div class="bar"><div class="barFill resist" id="resBar"></div></div>
    </div>

    <!-- MIDDLE LEFT: PERKS -->
    <div class="sectionBox">
      <h3>Özellikler</h3>
      <ul id="perkList"></ul>
    </div>

    <!-- BOTTOM LEFT: ITEMS -->
    <div class="sectionBox">
      <h3>Eşyalar</h3>
      <div>Henüz boş...</div>
    </div>
  </div>

  <!-- CENTER -->
  <div class="centerPanel sectionBox">
    <h2>Oyun Alanı</h2>
    <p>Burada dövüşler, eventler, seçimler olacak.</p>
  </div>

  <!-- RIGHT -->
  <div class="rightPanel sectionBox">
    <h3>Log</h3>
    <div class="log" id="logBox"></div>
  </div>
</div>

<script>
  const loginScreen = document.getElementById("loginScreen");
  const selectScreen = document.getElementById("characterSelectScreen");
  const gameScreen = document.getElementById("gameScreen");

  const startBtn = document.getElementById("startBtn");
  const playerNameInput = document.getElementById("playerNameInput");

  const cardRow = document.getElementById("cardRow");
  const rerollBtn = document.getElementById("rerollBtn");

  const charNameEl = document.getElementById("charName");
  const hpBar = document.getElementById("hpBar");
  const manaBar = document.getElementById("manaBar");
  const dmgBar = document.getElementById("dmgBar");
  const resBar = document.getElementById("resBar");
  const perkList = document.getElementById("perkList");
  const logBox = document.getElementById("logBox");

  let playerName = "";
  let rerollsLeft = 1;

  const characters = [
    {
      name: "Frieren",
      desc: "Aşırı yüksek mana, düşük can.",
      hp: 60,
      mana: 120,
      dmg: 40,
      res: 30,
      perks: ["Büyüler %20 güçlü", "Mana yenilenmesi +%10"]
    },
    {
      name: "Savaşçı",
      desc: "Yüksek can, güçlü fiziksel hasar.",
      hp: 120,
      mana: 30,
      dmg: 80,
      res: 60,
      perks: ["Fiziksel hasar +%15"]
    },
    {
      name: "Hırsız",
      desc: "Çevik ve kritik odaklı.",
      hp: 80,
      mana: 50,
      dmg: 60,
      res: 40,
      perks: ["Kritik şans +%20"]
    },
    {
      name: "Büyücü",
      desc: "Dengeli ama mana ağırlıklı.",
      hp: 70,
      mana: 100,
      dmg: 50,
      res: 35,
      perks: ["Alan büyüleri +%10"]
    }
  ];

  function randomThree() {
    const shuffled = [...characters].sort(() => 0.5 - Math.random());
    return shuffled.slice(0, 3);
  }

  function renderCards() {
    cardRow.innerHTML = "";
    const picks = randomThree();

    picks.forEach(char => {
      const div = document.createElement("div");
      div.className = "charCard";
      div.innerHTML = `
        <div class="charName">${char.name}</div>
        <p>${char.desc}</p>
        <p>HP: ${char.hp} | Mana: ${char.mana}</p>
        <p>Hasar: ${char.dmg} | Direnç: ${char.res}</p>
      `;
      div.onclick = () => selectCharacter(char);
      cardRow.appendChild(div);
    });
  }

  function selectCharacter(char) {
    // Setup HUD
    charNameEl.textContent = playerName + " - " + char.name;

    hpBar.style.width = char.hp + "%";
    manaBar.style.width = char.mana + "%";
    dmgBar.style.width = char.dmg + "%";
    resBar.style.width = char.res + "%";

    perkList.innerHTML = "";
    char.perks.forEach(p => {
      const li = document.createElement("li");
      li.textContent = p;
      perkList.appendChild(li);
    });

    logBox.innerHTML += `<div>${char.name} seçildi.</div>`;

    // Switch screen
    selectScreen.classList.remove("active");
    gameScreen.classList.add("active");
  }

  startBtn.onclick = () => {
    if (!playerNameInput.value.trim()) {
      alert("İsim gir!");
      return;
    }
    playerName = playerNameInput.value.trim();
    loginScreen.classList.remove("active");
    selectScreen.classList.add("active");
    renderCards();
  };

  rerollBtn.onclick = () => {
    if (rerollsLeft <= 0) {
      alert("Yenileme hakkın kalmadı!");
      return;
    }
    rerollsLeft--;
    renderCards();
    rerollBtn.textContent = "Yenile (0 hak)";
  };
</script>

</body>
</html>