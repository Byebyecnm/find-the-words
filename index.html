<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <title>Kelimeli Mahjong - Mobil</title>
  <style>
    * { 
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      -webkit-tap-highlight-color: transparent;
    }
    
    body { 
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #fff;
      overflow: hidden;
      height: 100vh;
      touch-action: manipulation;
    }
    
    .game-container {
      display: flex;
      flex-direction: column;
      height: 100vh;
      max-width: 100%;
      margin: 0 auto;
    }
    
    /* Header */
    .header {
      background: rgba(0, 0, 0, 0.3);
      padding: 12px 16px;
      backdrop-filter: blur(10px);
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-shrink: 0;
      position: relative;
      z-index: 100;
    }
    
    .stat-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 2px;
    }
    
    .stat-label {
      font-size: 10px;
      opacity: 0.8;
      text-transform: uppercase;
    }
    
    .stat-value {
      font-size: 18px;
      font-weight: 700;
      text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }
    
    .combo-indicator {
      position: absolute;
      top: 12px;
      left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      padding: 8px 16px;
      border-radius: 20px;
      font-weight: 700;
      font-size: 14px;
      box-shadow: 0 4px 12px rgba(245, 87, 108, 0.4);
      animation: comboPopIn 0.3s ease;
      display: none;
      pointer-events: none;
    }
    
    .combo-indicator.active { display: block; }
    
    @keyframes comboPopIn {
      from { transform: translateX(-50%) scale(0.5); opacity: 0; }
      to { transform: translateX(-50%) scale(1); opacity: 1; }
    }
    
    /* Game Board Container */
    .game-board {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
      position: relative;
      overflow-x: auto;
      overflow-y: hidden;
      -webkit-overflow-scrolling: touch;
      scroll-behavior: smooth;
    }
    
    /* Scroll kaydƒ±rƒ±cƒ±sƒ±nƒ± gizle ama scroll i≈ülevini koru */
    .game-board::-webkit-scrollbar {
      height: 4px;
    }
    
    .game-board::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.3);
      border-radius: 2px;
    }
    
    .board {
      position: relative;
      margin: 0 auto;
      min-width: min-content;
    }
    
    /* Tile Styles */
    .tile {
      position: absolute;
      background: linear-gradient(145deg, #ffffff, #f0f0f0);
      border: 3px solid #ddd;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      color: #2d3748;
      cursor: pointer;
      user-select: none;
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 
        0 4px 8px rgba(0,0,0,0.1),
        inset 0 1px 0 rgba(255,255,255,0.8);
      text-align: center;
      line-height: 1.1;
      padding: 6px;
      word-break: break-word;
      overflow: hidden;
      text-overflow: ellipsis;
      hyphens: auto;
    }
    
    /* Se√ßilebilir ta≈ülar - √áok belirgin */
    .tile.playable {
      border-color: #48bb78;
      box-shadow: 
        0 0 0 2px rgba(72, 187, 120, 0.3),
        0 0 20px rgba(72, 187, 120, 0.6),
        0 4px 8px rgba(0,0,0,0.1),
        inset 0 1px 0 rgba(255,255,255,0.8);
      animation: playablePulse 2s ease-in-out infinite;
    }
    
    @keyframes playablePulse {
      0%, 100% { 
        box-shadow: 
          0 0 0 2px rgba(72, 187, 120, 0.3),
          0 0 20px rgba(72, 187, 120, 0.6),
          0 4px 8px rgba(0,0,0,0.1),
          inset 0 1px 0 rgba(255,255,255,0.8);
      }
      50% { 
        box-shadow: 
          0 0 0 3px rgba(72, 187, 120, 0.5),
          0 0 30px rgba(72, 187, 120, 0.9),
          0 4px 12px rgba(0,0,0,0.15),
          inset 0 1px 0 rgba(255,255,255,0.8);
      }
    }
    
    .tile.blocked {
      opacity: 0.3;
      filter: grayscale(0.8);
      cursor: not-allowed;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      animation: none;
    }
    
    .tile.selected {
      background: linear-gradient(145deg, #bee3f8, #90cdf4);
      border-color: #3182ce;
      border-width: 4px;
      transform: translateY(-8px) scale(1.05);
      box-shadow: 
        0 12px 24px rgba(49, 130, 206, 0.5),
        inset 0 2px 0 rgba(255,255,255,0.9);
      z-index: 1000 !important;
    }
    
    .tile.matched {
      animation: matchSuccess 0.6s ease forwards;
      pointer-events: none;
    }
    
    @keyframes matchSuccess {
      0% { transform: scale(1); opacity: 1; }
      50% { 
        transform: scale(1.2) rotate(5deg);
        background: linear-gradient(145deg, #c6f6d5, #9ae6b4);
        border-color: #38a169;
      }
      100% { transform: scale(0); opacity: 0; }
    }
    
    .tile.wrong {
      animation: wrongShake 0.5s ease;
    }
    
    @keyframes wrongShake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      75% { transform: translateX(10px); }
    }
    
    .tile.hint {
      animation: hintGlow 1s ease-in-out 3;
    }
    
    @keyframes hintGlow {
      0%, 100% { 
        border-color: #f6ad55;
        box-shadow: 0 0 20px rgba(246, 173, 85, 0.8);
      }
      50% { 
        border-color: #ed8936;
        box-shadow: 0 0 40px rgba(237, 137, 54, 1);
      }
    }
    
    /* Controls */
    .controls {
      background: rgba(0, 0, 0, 0.4);
      backdrop-filter: blur(10px);
      padding: 12px 16px;
      flex-shrink: 0;
      position: relative;
      z-index: 100;
    }
    
    .control-row {
      display: flex;
      gap: 8px;
      margin-bottom: 8px;
    }
    
    .control-row:last-child { margin-bottom: 0; }
    
    select, button {
      flex: 1;
      padding: 12px 8px;
      border: none;
      border-radius: 10px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      touch-action: manipulation;
    }
    
    select {
      background: rgba(255, 255, 255, 0.2);
      color: #fff;
      text-align: center;
      -webkit-appearance: none;
      appearance: none;
    }
    
    button {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: #fff;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
    }
    
    button:active { transform: scale(0.96); }
    button:disabled { opacity: 0.5; cursor: not-allowed; }
    
    button.hint-btn {
      background: linear-gradient(135deg, #f6ad55, #ed8936);
    }
    
    button.reset-btn {
      background: linear-gradient(135deg, #fc8181, #e53e3e);
    }
    
    /* Modal */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10000;
      padding: 20px;
    }
    
    .modal.hidden { display: none; }
    
    .modal-content {
      background: linear-gradient(135deg, #667eea, #764ba2);
      border-radius: 24px;
      padding: 32px 24px;
      max-width: 400px;
      width: 100%;
      text-align: center;
      animation: modalSlideIn 0.3s ease;
    }
    
    @keyframes modalSlideIn {
      from { opacity: 0; transform: scale(0.9); }
      to { opacity: 1; transform: scale(1); }
    }
    
    .modal h2 {
      font-size: 32px;
      margin-bottom: 16px;
    }
    
    .modal p {
      font-size: 16px;
      margin-bottom: 20px;
      opacity: 0.9;
    }
    
    .modal input {
      width: 100%;
      padding: 16px;
      border: none;
      border-radius: 12px;
      font-size: 18px;
      text-align: center;
      font-weight: 600;
      margin-bottom: 16px;
      background: rgba(255, 255, 255, 0.9);
      color: #2d3748;
    }
    
    .modal button {
      width: 100%;
      background: rgba(255, 255, 255, 0.2);
      border: 2px solid #fff;
      padding: 16px;
      font-size: 18px;
    }
    
    /* Notification */
    .notification {
      position: fixed;
      top: 80px;
      left: 50%;
      transform: translateX(-50%) translateY(-100px);
      background: linear-gradient(135deg, #48bb78, #38a169);
      padding: 12px 20px;
      border-radius: 12px;
      font-weight: 700;
      font-size: 14px;
      box-shadow: 0 8px 24px rgba(72, 187, 120, 0.4);
      z-index: 9999;
      opacity: 0;
      transition: all 0.3s ease;
      pointer-events: none;
    }
    
    .notification.show {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }
    
    /* Loading/Warning */
    .warning-screen {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, #667eea, #764ba2);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10001;
      padding: 40px;
      text-align: center;
    }
    
    .warning-screen.hidden { display: none; }
    
    .warning-content {
      max-width: 400px;
    }
    
    .warning-content h2 {
      font-size: 48px;
      margin-bottom: 20px;
    }
    
    .warning-content p {
      font-size: 18px;
      line-height: 1.6;
      margin-bottom: 24px;
    }
    
    .warning-content button {
      padding: 16px 32px;
      background: rgba(255, 255, 255, 0.2);
      border: 2px solid #fff;
      border-radius: 12px;
      color: #fff;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <!-- Ekran K√º√ß√ºk Uyarƒ±sƒ± -->
  <div class="warning-screen hidden" id="warningScreen">
    <div class="warning-content">
      <h2>üì±</h2>
      <p>Ekranƒ±nƒ±z bu zorluk seviyesi i√ßin √ßok k√º√ß√ºk. L√ºtfen daha kolay bir mod se√ßin veya cihazƒ±nƒ±zƒ± d√∂nd√ºr√ºn.</p>
      <button id="warningOk">Tamam</button>
    </div>
  </div>

  <!-- ƒ∞sim Modal -->
  <div class="modal hidden" id="nameModal">
    <div class="modal-content">
      <h2>üÄÑ Ho≈ü Geldin!</h2>
      <p>Adƒ±nƒ± gir ve ba≈ülayalƒ±m</p>
      <input type="text" id="nameInput" placeholder="ƒ∞smin..." maxlength="20" />
      <button id="nameSubmit">Ba≈üla üöÄ</button>
    </div>
  </div>

  <!-- Kazanma Modal -->
  <div class="modal hidden" id="winModal">
    <div class="modal-content">
      <h2>üéâ Kazandƒ±n!</h2>
      <p id="winMessage"></p>
      <button id="playAgain">Tekrar Oyna</button>
    </div>
  </div>

  <!-- Bildirim -->
  <div class="notification" id="notification"></div>

  <!-- Ana Oyun -->
  <div class="game-container">
    <!-- Header -->
    <div class="header">
      <div class="stat-item">
        <div class="stat-label">Puan</div>
        <div class="stat-value" id="score">0</div>
      </div>
      <div class="stat-item">
        <div class="stat-label">S√ºre</div>
        <div class="stat-value" id="timer">0:00</div>
      </div>
      <div class="stat-item">
        <div class="stat-label">Kalan</div>
        <div class="stat-value" id="remaining">0</div>
      </div>
    </div>

    <!-- Combo -->
    <div class="combo-indicator" id="comboIndicator">üî• Combo x0</div>

    <!-- Board -->
    <div class="game-board" id="gameBoard">
      <div class="board" id="board"></div>
    </div>

    <!-- Controls -->
    <div class="controls">
      <div class="control-row">
        <select id="langSelect">
          <option value="en">üá¨üáß EN</option>
          <option value="es">üá™üá∏ ES</option>
          <option value="kr">üá∞üá∑ KR</option>
        </select>
        <select id="levelSelect">
          <option value="a1">A1</option>
          <option value="a2">A2</option>
          <option value="b1">B1</option>
          <option value="b2">B2</option>
          <option value="c1">C1</option>
          <option value="c2">C2</option>
        </select>
        <select id="difficultySelect">
          <option value="easy">üü¢ Kolay</option>
          <option value="medium">üü° Orta</option>
          <option value="hard">üî¥ Zor</option>
          <option value="expert">üíÄ Uzman</option>
        </select>
      </div>
      <div class="control-row">
        <button id="startBtn">‚ñ∂Ô∏è Ba≈ülat</button>
        <button class="hint-btn" id="hintBtn" disabled>üí° ƒ∞pucu</button>
        <button class="reset-btn" id="resetBtn" disabled>üîÑ</button>
      </div>
    </div>
  </div>

  <script>
    // ===== KELƒ∞ME HAVUZU (Kƒ±saltƒ±lmƒ±≈ü) =====
    const wordPairs = {
      en: {
        a1: [
          ['hello', 'merhaba'], ['yes', 'evet'], ['no', 'hayƒ±r'], ['water', 'su'], ['dog', 'k√∂pek'],
          ['cat', 'kedi'], ['house', 'ev'], ['book', 'kitap'], ['sun', 'g√ºne≈ü'], ['day', 'g√ºn'],
          ['night', 'gece'], ['family', 'aile'], ['car', 'araba'], ['tree', 'aƒüa√ß'], ['food', 'yemek'],
          ['milk', 's√ºt'], ['tea', '√ßay'], ['hot', 'sƒ±cak'], ['cold', 'soƒüuk'], ['big', 'b√ºy√ºk'],
          ['small', 'k√º√ß√ºk'], ['good', 'iyi'], ['bad', 'k√∂t√º'], ['red', 'kƒ±rmƒ±zƒ±'], ['blue', 'mavi'],
          ['one', 'bir'], ['two', 'iki'], ['happy', 'mutlu'], ['sad', '√ºzg√ºn'], ['eat', 'yemek'],
          ['walk', 'y√ºr√ºmek'], ['run', 'ko≈ümak'], ['sleep', 'uyumak'], ['hand', 'el'], ['eye', 'g√∂z'],
          ['new', 'yeni'], ['old', 'eski'], ['left', 'sol'], ['right', 'saƒü'], ['up', 'yukarƒ±'],
          ['down', 'a≈üaƒüƒ±'], ['stop', 'dur'], ['go', 'git'], ['come', 'gel'], ['here', 'burasƒ±'],
          ['there', 'orasƒ±'], ['boy', 'oƒülan'], ['girl', 'kƒ±z'], ['love', 'a≈ük']
        ],
        a2: [
          ['school', 'okul'], ['work', 'i≈ü'], ['money', 'para'], ['city', '≈üehir'], ['road', 'yol'],
          ['train', 'tren'], ['plane', 'u√ßak'], ['rain', 'yaƒümur'], ['snow', 'kar'], ['wind', 'r√ºzgar'],
          ['summer', 'yaz'], ['winter', 'kƒ±≈ü'], ['week', 'hafta'], ['month', 'ay'], ['year', 'yƒ±l'],
          ['time', 'zaman'], ['hour', 'saat'], ['today', 'bug√ºn'], ['music', 'm√ºzik'], ['song', '≈üarkƒ±'],
          ['game', 'oyun'], ['sport', 'spor'], ['price', 'fiyat'], ['cheap', 'ucuz'], ['buy', 'almak'],
          ['speak', 'konu≈ümak'], ['listen', 'dinlemek'], ['read', 'okumak'], ['write', 'yazmak'], ['learn', '√∂ƒürenmek'],
          ['know', 'bilmek'], ['think', 'd√º≈ü√ºnmek'], ['feel', 'hissetmek'], ['want', 'istemek'], ['need', 'gerekmek'],
          ['find', 'bulmak'], ['give', 'vermek'], ['take', 'almak'], ['help', 'yardƒ±m'], ['ask', 'sormak'],
          ['tell', 's√∂ylemek'], ['show', 'g√∂stermek'], ['hear', 'duymak'], ['see', 'g√∂rmek'], ['look', 'bakmak'],
          ['watch', 'izlemek'], ['wait', 'beklemek'], ['open', 'a√ßmak'], ['close', 'kapatmak']
        ],
        b1: [
          ['travel', 'seyahat'], ['culture', 'k√ºlt√ºr'], ['language', 'dil'], ['government', 'h√ºk√ºmet'], ['law', 'yasa'],
          ['freedom', '√∂zg√ºrl√ºk'], ['society', 'toplum'], ['economy', 'ekonomi'], ['business', 'i≈ü'], ['company', '≈üirket'],
          ['career', 'kariyer'], ['education', 'eƒüitim'], ['science', 'bilim'], ['research', 'ara≈ütƒ±rma'], ['technology', 'teknoloji'],
          ['health', 'saƒülƒ±k'], ['medicine', 'ila√ß'], ['doctor', 'doktor'], ['patient', 'hasta'], ['environment', '√ßevre'],
          ['nature', 'doƒüa'], ['pollution', 'kirlilik'], ['energy', 'enerji'], ['climate', 'iklim'], ['ocean', 'okyanus'],
          ['forest', 'orman'], ['mountain', 'daƒü'], ['river', 'nehir'], ['desert', '√ß√∂l'], ['island', 'ada'],
          ['opportunity', 'fƒ±rsat'], ['challenge', 'zorluk'], ['solution', '√ß√∂z√ºm'], ['decision', 'karar'], ['opinion', 'g√∂r√º≈ü'],
          ['success', 'ba≈üarƒ±'], ['failure', 'ba≈üarƒ±sƒ±zlƒ±k'], ['advantage', 'avantaj'], ['problem', 'sorun'], ['answer', 'cevap'],
          ['question', 'soru'], ['reason', 'sebep'], ['result', 'sonu√ß'], ['example', '√∂rnek'], ['idea', 'fikir'],
          ['plan', 'plan'], ['goal', 'hedef'], ['change', 'deƒüi≈üim'], ['growth', 'b√ºy√ºme']
        ],
        b2: [
          ['achievement', 'ba≈üarƒ±'], ['ambition', 'hƒ±rs'], ['courage', 'cesaret'], ['discipline', 'disiplin'], ['independence', 'baƒüƒ±msƒ±zlƒ±k'],
          ['intelligence', 'zeka'], ['motivation', 'motivasyon'], ['patience', 'sabƒ±r'], ['perspective', 'bakƒ±≈ü a√ßƒ±sƒ±'], ['potential', 'potansiyel'],
          ['responsibility', 'sorumluluk'], ['strategy', 'strateji'], ['analyze', 'analiz'], ['assess', 'deƒüerlendirme'], ['collaborate', 'i≈übirliƒüi'],
          ['demonstrate', 'g√∂sterme'], ['establish', 'kurma'], ['implement', 'uygulama'], ['maintain', 's√ºrd√ºrme'], ['modify', 'deƒüi≈ütirme'],
          ['phenomenon', 'olgu'], ['hypothesis', 'hipotez'], ['methodology', 'metodoloji'], ['correlation', 'ili≈üki'], ['consequence', 'sonu√ß'],
          ['criteria', 'kriter'], ['framework', '√ßer√ßeve'], ['insight', 'i√ßg√∂r√º'], ['interpretation', 'yorum'], ['mechanism', 'mekanizma'],
          ['objective', 'ama√ß'], ['perception', 'algƒ±'], ['proportion', 'oran'], ['relevance', 'ilgililik'], ['scope', 'kapsam'],
          ['significance', '√∂nem'], ['structure', 'yapƒ±'], ['sustainable', 's√ºrd√ºr√ºlebilir'], ['systematic', 'sistematik'], ['complex', 'karma≈üƒ±k'],
          ['consistent', 'tutarlƒ±'], ['comprehensive', 'kapsamlƒ±'], ['contemporary', '√ßaƒüda≈ü'], ['crucial', 'kritik'], ['evident', 'a√ßƒ±k'],
          ['fundamental', 'temel'], ['implicit', '√∂rt√ºk'], ['inevitable', 'ka√ßƒ±nƒ±lmaz'], ['integral', 'ayrƒ±lmaz']
        ],
        c1: [
          ['coherent', 'tutarlƒ±'], ['discourse', 's√∂ylem'], ['empirical', 'deneysel'], ['endeavor', '√ßaba'], ['equitable', 'adil'],
          ['inherent', 'doƒüal'], ['intrinsic', '√∂zg√ºn'], ['marginal', 'marjinal'], ['meticulous', 'titiz'], ['plausible', 'makul'],
          ['precedent', 'emsal'], ['prerequisite', '√∂n ko≈üul'], ['profound', 'derin'], ['ambiguous', 'belirsiz'], ['arbitrary', 'keyfi'],
          ['conceive', 'tasarlamak'], ['constraint', 'kƒ±sƒ±tlama'], ['deduce', '√ßƒ±karmak'], ['deficient', 'eksik'], ['discrete', 'ayrƒ±k'],
          ['disparity', 'e≈üitsizlik'], ['disposition', 'eƒüilim'], ['doctrine', 'doktrin'], ['domain', 'alan'], ['elaborate', 'detaylandƒ±rmak'],
          ['feasible', 'uygulanabilir'], ['fluctuate', 'dalgalanmak'], ['formulate', 'form√ºle etmek'], ['hierarchy', 'hiyerar≈üi'], ['ideology', 'ideoloji'],
          ['implicit', '√∂rt√ºk'], ['indispensable', 'vazge√ßilmez'], ['inevitable', 'ka√ßƒ±nƒ±lmaz'], ['infrastructure', 'altyapƒ±'], ['inhibit', 'engellemek'],
          ['innovate', 'yenilik yapmak'], ['integral', 'ayrƒ±lmaz'], ['intervene', 'm√ºdahale etmek'], ['underlying', 'altta yatan'], ['undermine', 'baltalamak'],
          ['unify', 'birle≈ütirmek'], ['utilize', 'kullanmak'], ['verify', 'doƒürulamak'], ['viable', 'uygulanabilir'], ['volatile', 'deƒüi≈üken'],
          ['warrant', 'garanti etmek'], ['whereby', 'vasƒ±tasƒ±yla'], ['invoke', 'ba≈üvurmak']
        ],
        c2: [
          ['aberration', 'sapma'], ['abstruse', 'anla≈üƒ±lmaz'], ['ameliorate', 'iyile≈ütirmek'], ['ancillary', 'yardƒ±mcƒ±'], ['antithetical', 'zƒ±t'],
          ['arcane', 'gizli'], ['assiduous', 'gayretli'], ['auspicious', 'uƒüurlu'], ['axiom', 'aksiyom'], ['belligerent', 'kavgacƒ±'],
          ['circumscribe', 'sƒ±nƒ±rlamak'], ['coalesce', 'birle≈ümek'], ['cogent', 'ikna edici'], ['commensurate', 'orantƒ±lƒ±'], ['compendium', '√∂zet'],
          ['concomitant', 'e≈ülik eden'], ['confound', '≈üa≈üƒ±rtmak'], ['congenial', 'uyumlu'], ['conjecture', 'tahmin'], ['contentious', 'tartƒ±≈ümalƒ±'],
          ['deference', 'saygƒ±'], ['derivative', 't√ºrev'], ['dichotomy', 'ikilem'], ['didactic', '√∂ƒüretici'], ['discern', 'ayƒ±rt etmak'],
          ['disparate', 'farklƒ±'], ['disseminate', 'yaymak'], ['efficacious', 'etkili'], ['elucidate', 'aydƒ±nlatmak'], ['empiricism', 'deneycilik'],
          ['endemic', 'endemik'], ['engender', 'doƒüurmak'], ['ephemeral', 'ge√ßici'], ['epistemology', 'bilgi kuramƒ±'], ['equivocal', 'belirsiz'],
          ['erudite', 'bilgili'], ['esoteric', 'ezoterik'], ['exacerbate', 'k√∂t√ºle≈ütirmek'], ['exculpate', 'temize √ßƒ±karmak'], ['exigent', 'acil'],
          ['extrapolate', 'tahmin etmek'], ['fallacious', 'yanƒ±ltƒ±cƒ±'], ['fortuitous', 'tesad√ºfi'], ['gregarious', 'sosyal'], ['hegemony', 'hegemonya'],
          ['heuristic', 'sezgisel'], ['homogeneous', 'homojen'], ['iconoclast', 'geleneklere aykƒ±rƒ±'], ['idiosyncratic', 'kendine √∂zg√º']
        ]
      },
      es: { a1: [], a2: [], b1: [], b2: [], c1: [], c2: [] }, // Aynƒ± yapƒ±da
      kr: { a1: [], a2: [], b1: [], b2: [], c1: [], c2: [] }  // Aynƒ± yapƒ±da
    };

    // ƒ∞spanyolca ve Korece i√ßin de aynƒ± kelimeleri ekle (kƒ±salƒ±k i√ßin sadece ƒ∞ngilizce dolu)
    ['es', 'kr'].forEach(lang => {
      ['a1', 'a2', 'b1', 'b2', 'c1', 'c2'].forEach(level => {
        wordPairs[lang][level] = wordPairs.en[level];
      });
    });

    // ===== Dƒ∞NAMƒ∞K LAYOUT Sƒ∞STEMƒ∞ =====
    const LAYOUTS = {
      easy: {
        name: 'Kolay',
        totalTiles: 24,
        grid: { cols: 6, rows: 4 },
        positions: [
          // Katman 0 - taban
          {x:1,y:0,z:0},{x:2,y:0,z:0},{x:3,y:0,z:0},{x:4,y:0,z:0},
          {x:0,y:1,z:0},{x:1,y:1,z:0},{x:2,y:1,z:0},{x:3,y:1,z:0},{x:4,y:1,z:0},{x:5,y:1,z:0},
          {x:0,y:2,z:0},{x:1,y:2,z:0},{x:2,y:2,z:0},{x:3,y:2,z:0},{x:4,y:2,z:0},{x:5,y:2,z:0},
          {x:1,y:3,z:0},{x:2,y:3,z:0},{x:3,y:3,z:0},{x:4,y:3,z:0},
          // Katman 1 - √ºst
          {x:2,y:1,z:1},{x:3,y:1,z:1},{x:2,y:2,z:1},{x:3,y:2,z:1}
        ]
      },
      medium: {
        name: 'Orta',
        totalTiles: 48,
        grid: { cols: 8, rows: 6 },
        positions: [
          // Katman 0
          {x:1,y:0,z:0},{x:2,y:0,z:0},{x:3,y:0,z:0},{x:4,y:0,z:0},{x:5,y:0,z:0},{x:6,y:0,z:0},
          {x:0,y:1,z:0},{x:1,y:1,z:0},{x:2,y:1,z:0},{x:3,y:1,z:0},{x:4,y:1,z:0},{x:5,y:1,z:0},{x:6,y:1,z:0},{x:7,y:1,z:0},
          {x:0,y:2,z:0},{x:1,y:2,z:0},{x:2,y:2,z:0},{x:3,y:2,z:0},{x:4,y:2,z:0},{x:5,y:2,z:0},{x:6,y:2,z:0},{x:7,y:2,z:0},
          {x:0,y:3,z:0},{x:1,y:3,z:0},{x:2,y:3,z:0},{x:3,y:3,z:0},{x:4,y:3,z:0},{x:5,y:3,z:0},{x:6,y:3,z:0},{x:7,y:3,z:0},
          {x:0,y:4,z:0},{x:1,y:4,z:0},{x:2,y:4,z:0},{x:3,y:4,z:0},{x:4,y:4,z:0},{x:5,y:4,z:0},{x:6,y:4,z:0},{x:7,y:4,z:0},
          {x:1,y:5,z:0},{x:2,y:5,z:0},{x:3,y:5,z:0},{x:4,y:5,z:0},{x:5,y:5,z:0},{x:6,y:5,z:0},
          // Katman 1
          {x:2,y:2,z:1},{x:3,y:2,z:1},{x:4,y:2,z:1},{x:5,y:2,z:1},
          {x:2,y:3,z:1},{x:3,y:3,z:1},{x:4,y:3,z:1},{x:5,y:3,z:1}
        ]
      },
      hard: {
        name: 'Zor',
        totalTiles: 72,
        grid: { cols: 9, rows: 8 },
        positions: [
          // Daha yoƒüun ama tek ekrana sƒ±ƒüan d√ºzen
          {x:1,y:0,z:0},{x:2,y:0,z:0},{x:3,y:0,z:0},{x:4,y:0,z:0},{x:5,y:0,z:0},{x:6,y:0,z:0},{x:7,y:0,z:0},
          {x:0,y:1,z:0},{x:1,y:1,z:0},{x:2,y:1,z:0},{x:3,y:1,z:0},{x:4,y:1,z:0},{x:5,y:1,z:0},{x:6,y:1,z:0},{x:7,y:1,z:0},{x:8,y:1,z:0},
          {x:0,y:2,z:0},{x:1,y:2,z:0},{x:2,y:2,z:0},{x:3,y:2,z:0},{x:4,y:2,z:0},{x:5,y:2,z:0},{x:6,y:2,z:0},{x:7,y:2,z:0},{x:8,y:2,z:0},
          {x:0,y:3,z:0},{x:1,y:3,z:0},{x:2,y:3,z:0},{x:3,y:3,z:0},{x:4,y:3,z:0},{x:5,y:3,z:0},{x:6,y:3,z:0},{x:7,y:3,z:0},{x:8,y:3,z:0},
          {x:0,y:4,z:0},{x:1,y:4,z:0},{x:2,y:4,z:0},{x:3,y:4,z:0},{x:4,y:4,z:0},{x:5,y:4,z:0},{x:6,y:4,z:0},{x:7,y:4,z:0},{x:8,y:4,z:0},
          {x:0,y:5,z:0},{x:1,y:5,z:0},{x:2,y:5,z:0},{x:3,y:5,z:0},{x:4,y:5,z:0},{x:5,y:5,z:0},{x:6,y:5,z:0},{x:7,y:5,z:0},{x:8,y:5,z:0},
          {x:0,y:6,z:0},{x:1,y:6,z:0},{x:2,y:6,z:0},{x:3,y:6,z:0},{x:4,y:6,z:0},{x:5,y:6,z:0},{x:6,y:6,z:0},{x:7,y:6,z:0},{x:8,y:6,z:0},
          {x:1,y:7,z:0},{x:2,y:7,z:0},{x:3,y:7,z:0},{x:4,y:7,z:0},{x:5,y:7,z:0},{x:6,y:7,z:0},{x:7,y:7,z:0},
          // Katman 1
          {x:3,y:3,z:1},{x:4,y:3,z:1},{x:5,y:3,z:1},
          {x:3,y:4,z:1},{x:4,y:4,z:1},{x:5,y:4,z:1}
        ]
      },
      expert: {
        name: 'Uzman',
        totalTiles: 96,
        grid: { cols: 12, rows: 8 },
        scrollEnabled: true,
        positions: [
          // Geni≈ü d√ºzen - yatay scroll ile
          {x:2,y:0,z:0},{x:3,y:0,z:0},{x:4,y:0,z:0},{x:5,y:0,z:0},{x:6,y:0,z:0},{x:7,y:0,z:0},{x:8,y:0,z:0},{x:9,y:0,z:0},
          {x:1,y:1,z:0},{x:2,y:1,z:0},{x:3,y:1,z:0},{x:4,y:1,z:0},{x:5,y:1,z:0},{x:6,y:1,z:0},{x:7,y:1,z:0},{x:8,y:1,z:0},{x:9,y:1,z:0},{x:10,y:1,z:0},
          {x:0,y:2,z:0},{x:1,y:2,z:0},{x:2,y:2,z:0},{x:3,y:2,z:0},{x:4,y:2,z:0},{x:5,y:2,z:0},{x:6,y:2,z:0},{x:7,y:2,z:0},{x:8,y:2,z:0},{x:9,y:2,z:0},{x:10,y:2,z:0},{x:11,y:2,z:0},
          {x:0,y:3,z:0},{x:1,y:3,z:0},{x:2,y:3,z:0},{x:3,y:3,z:0},{x:4,y:3,z:0},{x:5,y:3,z:0},{x:6,y:3,z:0},{x:7,y:3,z:0},{x:8,y:3,z:0},{x:9,y:3,z:0},{x:10,y:3,z:0},{x:11,y:3,z:0},
          {x:0,y:4,z:0},{x:1,y:4,z:0},{x:2,y:4,z:0},{x:3,y:4,z:0},{x:4,y:4,z:0},{x:5,y:4,z:0},{x:6,y:4,z:0},{x:7,y:4,z:0},{x:8,y:4,z:0},{x:9,y:4,z:0},{x:10,y:4,z:0},{x:11,y:4,z:0},
          {x:0,y:5,z:0},{x:1,y:5,z:0},{x:2,y:5,z:0},{x:3,y:5,z:0},{x:4,y:5,z:0},{x:5,y:5,z:0},{x:6,y:5,z:0},{x:7,y:5,z:0},{x:8,y:5,z:0},{x:9,y:5,z:0},{x:10,y:5,z:0},{x:11,y:5,z:0},
          {x:1,y:6,z:0},{x:2,y:6,z:0},{x:3,y:6,z:0},{x:4,y:6,z:0},{x:5,y:6,z:0},{x:6,y:6,z:0},{x:7,y:6,z:0},{x:8,y:6,z:0},{x:9,y:6,z:0},{x:10,y:6,z:0},
          {x:2,y:7,z:0},{x:3,y:7,z:0},{x:4,y:7,z:0},{x:5,y:7,z:0},{x:6,y:7,z:0},{x:7,y:7,z:0},{x:8,y:7,z:0},{x:9,y:7,z:0},
          // Katman 1
          {x:4,y:3,z:1},{x:5,y:3,z:1},{x:6,y:3,z:1},{x:7,y:3,z:1},
          {x:4,y:4,z:1},{x:5,y:4,z:1},{x:6,y:4,z:1},{x:7,y:4,z:1}
        ]
      }
    };

    // ===== Tƒ∞LE BOYUTU HESAPLAMA =====
    function calculateTileMetrics(difficulty) {
      const layout = LAYOUTS[difficulty];
      const viewport = {
        width: window.innerWidth,
        height: window.innerHeight
      };
      
      const SAFE_AREA = {
        top: 120,      // Header
        bottom: 140,   // Controls
        horizontal: 32 // Padding
      };
      
      const MIN_TILE = {
        width: 48,
        height: 60,
        fontSize: 11
      };
      
      const availableWidth = viewport.width - SAFE_AREA.horizontal;
      const availableHeight = viewport.height - SAFE_AREA.top - SAFE_AREA.bottom;
      
      // Grid boyutlarƒ±na g√∂re hesapla
      const { cols, rows } = layout.grid;
      const spacing = 8; // Ta≈ülar arasƒ± bo≈üluk
      
      let tileWidth = Math.floor((availableWidth - (cols * spacing)) / cols);
      let tileHeight = Math.floor((availableHeight - (rows * spacing)) / rows);
      
      // Aspect ratio kontrol√º (yakla≈üƒ±k 4:5)
      const idealHeight = tileWidth * 1.25;
      if (tileHeight > idealHeight) {
        tileHeight = Math.floor(idealHeight);
      } else {
        tileWidth = Math.floor(tileHeight * 0.8);
      }
      
      // Minimum kontrol
      if (tileWidth < MIN_TILE.width || tileHeight < MIN_TILE.height) {
        return {
          valid: false,
          reason: 'SCREEN_TOO_SMALL',
          message: `Bu zorluk ${viewport.width}x${viewport.height} ekranda oynanamaz`
        };
      }
      
      return {
        valid: true,
        tileWidth,
        tileHeight,
        fontSize: Math.max(MIN_TILE.fontSize, Math.floor(tileWidth * 0.22)),
        spacing,
        zOffset: 4
      };
    }

    // ===== OYUN DEƒûƒ∞≈ûKENLERƒ∞ =====
    let tiles = [];
    let selectedTile = null;
    let score = 0;
    let moves = 0;
    let matches = 0;
    let totalPairs = 0;
    let combo = 0;
    let gameActive = false;
    let timer = null;
    let timeElapsed = 0;
    let freeHints = 2;
    let playerName = '';

    // DOM
    const board = document.getElementById('board');
    const gameBoard = document.getElementById('gameBoard');
    const scoreEl = document.getElementById('score');
    const timerEl = document.getElementById('timer');
    const remainingEl = document.getElementById('remaining');
    const comboIndicator = document.getElementById('comboIndicator');
    const startBtn = document.getElementById('startBtn');
    const hintBtn = document.getElementById('hintBtn');
    const resetBtn = document.getElementById('resetBtn');
    const langSelect = document.getElementById('langSelect');
    const levelSelect = document.getElementById('levelSelect');
    const difficultySelect = document.getElementById('difficultySelect');
    const nameModal = document.getElementById('nameModal');
    const nameInput = document.getElementById('nameInput');
    const nameSubmit = document.getElementById('nameSubmit');
    const winModal = document.getElementById('winModal');
    const winMessage = document.getElementById('winMessage');
    const playAgain = document.getElementById('playAgain');
    const notification = document.getElementById('notification');
    const warningScreen = document.getElementById('warningScreen');
    const warningOk = document.getElementById('warningOk');

    // ===== YARDIMCI FONKSƒ∞YONLAR =====
    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function formatTime(seconds) {
      const mins = Math.floor(seconds / 60);
      const secs = seconds % 60;
      return `${mins}:${secs.toString().padStart(2, '0')}`;
    }

    function showNotification(message, duration = 2000) {
      notification.textContent = message;
      notification.classList.add('show');
      setTimeout(() => {
        notification.classList.remove('show');
      }, duration);
    }

    function showWarning(message) {
      warningScreen.querySelector('p').textContent = message;
      warningScreen.classList.remove('hidden');
    }

    warningOk.addEventListener('click', () => {
      warningScreen.classList.add('hidden');
      difficultySelect.value = 'easy';
    });

    // ===== ƒ∞Sƒ∞M Y√ñNETƒ∞Mƒ∞ =====
    function initName() {
      playerName = localStorage.getItem('mahjong_player_name');
      if (!playerName) {
        nameModal.classList.remove('hidden');
        nameInput.focus();
      }
    }

    nameSubmit.addEventListener('click', () => {
      const name = nameInput.value.trim();
      if (name) {
        playerName = name;
        localStorage.setItem('mahjong_player_name', name);
        nameModal.classList.add('hidden');
      }
    });

    nameInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') nameSubmit.click();
    });

    // ===== TA≈û KONTROL =====
    function isTileBlocked(tile) {
      const above = tiles.find(t => 
        !t.matched && 
        t.z === tile.z + 1 &&
        Math.abs(t.x - tile.x) <= 0.5 &&
        Math.abs(t.y - tile.y) <= 0.5
      );
      if (above) return true;

      const leftBlocked = tiles.some(t => 
        !t.matched && 
        t.z === tile.z &&
        t.x === tile.x - 1 &&
        t.y === tile.y
      );
      const rightBlocked = tiles.some(t => 
        !t.matched && 
        t.z === tile.z &&
        t.x === tile.x + 1 &&
        t.y === tile.y
      );

      return leftBlocked && rightBlocked;
    }

    function updateTileStates() {
      tiles.forEach(tile => {
        if (!tile.matched) {
          const blocked = isTileBlocked(tile);
          tile.element.classList.toggle('blocked', blocked);
          tile.element.classList.toggle('playable', !blocked);
        }
      });
    }

    // ===== OYUN KURULUMU =====
    function setupGame() {
      const lang = langSelect.value;
      const level = levelSelect.value;
      const difficulty = difficultySelect.value;
      const layout = LAYOUTS[difficulty];
      
      // Tile boyutlarƒ±nƒ± hesapla
      const metrics = calculateTileMetrics(difficulty);
      
      if (!metrics.valid) {
        showWarning(metrics.message);
        return false;
      }

      totalPairs = layout.totalTiles / 2;

      const availablePairs = wordPairs[lang][level];
      const pairs = shuffle([...availablePairs]).slice(0, totalPairs);
      const tileWords = [];
      
      pairs.forEach(([foreign, turkish]) => {
        tileWords.push({ word: foreign, pairId: foreign });
        tileWords.push({ word: turkish, pairId: foreign });
      });
      
      shuffle(tileWords);

      board.innerHTML = '';
      tiles = [];
      selectedTile = null;
      score = 0;
      moves = 0;
      matches = 0;
      combo = 0;
      freeHints = 2;

      const { tileWidth, tileHeight, fontSize, spacing, zOffset } = metrics;

      layout.positions.forEach((pos, idx) => {
        const tileData = tileWords[idx];
        const tile = {
          x: pos.x,
          y: pos.y,
          z: pos.z,
          word: tileData.word,
          pairId: tileData.pairId,
          matched: false,
          element: null
        };

        const div = document.createElement('div');
        div.className = 'tile';
        div.textContent = tile.word;
        div.style.width = tileWidth + 'px';
        div.style.height = tileHeight + 'px';
        div.style.fontSize = fontSize + 'px';
        
        const left = pos.x * (tileWidth + spacing) - pos.z * zOffset;
        const top = pos.y * (tileHeight + spacing) - pos.z * zOffset;
        const zIndex = pos.z * 100 + pos.y * 10 + pos.x;
        
        div.style.left = left + 'px';
        div.style.top = top + 'px';
        div.style.zIndex = zIndex;

        div.addEventListener('click', () => onTileClick(tile));
        
        tile.element = div;
        tiles.push(tile);
        board.appendChild(div);
      });

      const maxX = Math.max(...layout.positions.map(p => p.x));
      const maxY = Math.max(...layout.positions.map(p => p.y));
      const maxZ = Math.max(...layout.positions.map(p => p.z));
      
      board.style.width = (maxX * (tileWidth + spacing) + tileWidth + maxZ * zOffset) + 'px';
      board.style.height = (maxY * (tileHeight + spacing) + tileHeight + maxZ * zOffset) + 'px';

      // Expert modda scroll'u g√∂ster
      if (layout.scrollEnabled) {
        showNotification('üëÜ Kaydƒ±rarak t√ºm tahtayƒ± g√∂rebilirsiniz', 3000);
      }

      updateTileStates();
      updateUI();
      return true;
    }

    // ===== TA≈û TIKLAMA =====
    function onTileClick(tile) {
      if (!gameActive || tile.matched || isTileBlocked(tile)) return;

      if (selectedTile === tile) {
        tile.element.classList.remove('selected');
        selectedTile = null;
        return;
      }

      if (!selectedTile) {
        selectedTile = tile;
        tile.element.classList.add('selected');
      } else {
        moves++;
        
        if (selectedTile.pairId === tile.pairId && selectedTile.word !== tile.word) {
          selectedTile.matched = true;
          tile.matched = true;
          selectedTile.element.classList.remove('selected', 'playable');
          selectedTile.element.classList.add('matched');
          tile.element.classList.add('matched');
          
          matches++;
          combo++;
          
          const comboMultiplier = combo >= 3 ? 1.5 : 1;
          const points = Math.floor(100 * comboMultiplier);
          score += points;
          
          if (combo >= 3) {
            comboIndicator.textContent = `üî• Combo x${combo}`;
            comboIndicator.classList.add('active');
            setTimeout(() => comboIndicator.classList.remove('active'), 2000);
          }
          
          showNotification(`+${points} puan!`, 1000);
          
          setTimeout(() => {
            selectedTile.element.style.display = 'none';
            tile.element.style.display = 'none';
            selectedTile = null;
            updateTileStates();
            updateUI();
            
            if (matches === totalPairs) {
              endGame(true);
            }
          }, 600);
        } else {
          combo = 0;
          const wrongTile = tile;
          wrongTile.element.classList.add('selected', 'wrong');
          selectedTile.element.classList.add('wrong');
          score = Math.max(0, score - 10);
          
          showNotification('‚ùå Yanlƒ±≈ü!', 800);
          
          setTimeout(() => {
            selectedTile.element.classList.remove('selected', 'wrong');
            wrongTile.element.classList.remove('selected', 'wrong');
            selectedTile = null;
            updateUI();
          }, 500);
        }
      }
    }

    // ===== ƒ∞PUCU =====
    hintBtn.addEventListener('click', () => {
      if (!gameActive) return;

      const availableTiles = tiles.filter(t => !t.matched && !isTileBlocked(t));
      const pairs = [];

      for (let i = 0; i < availableTiles.length; i++) {
        for (let j = i + 1; j < availableTiles.length; j++) {
          if (availableTiles[i].pairId === availableTiles[j].pairId && 
              availableTiles[i].word !== availableTiles[j].word) {
            pairs.push([availableTiles[i], availableTiles[j]]);
          }
        }
      }

      if (pairs.length > 0) {
        const [tile1, tile2] = pairs[0];
        tile1.element.classList.add('hint');
        tile2.element.classList.add('hint');
        
        setTimeout(() => {
          tile1.element.classList.remove('hint');
          tile2.element.classList.remove('hint');
        }, 3000);
        
        if (freeHints > 0) {
          freeHints--;
          showNotification(`üí° Bedava! (${freeHints} kaldƒ±)`, 1500);
        } else {
          score = Math.max(0, score - 30);
          showNotification('üí° ƒ∞pucu (-30)', 1500);
        }
        updateUI();
      } else {
        showNotification('‚ùå E≈üle≈üme yok!', 1500);
      }
    });

    // ===== ZAMAN =====
    function startTimer() {
      clearInterval(timer);
      timeElapsed = 0;
      timer = setInterval(() => {
        if (!gameActive) return;
        timeElapsed++;
        timerEl.textContent = formatTime(timeElapsed);
      }, 1000);
    }

    // ===== UI =====
    function updateUI() {
      scoreEl.textContent = score;
      remainingEl.textContent = totalPairs - matches;
    }

    // ===== OYUN =====
    function startGame() {
      if (!setupGame()) return;
      
      gameActive = true;
      startBtn.disabled = true;
      resetBtn.disabled = false;
      hintBtn.disabled = false;
      startTimer();
      winModal.classList.add('hidden');
    }

    function endGame(won) {
      gameActive = false;
      clearInterval(timer);
      startBtn.disabled = false;
      resetBtn.disabled = true;
      hintBtn.disabled = true;

      if (won) {
        const timeBonus = Math.max(0, 300 - timeElapsed) * 2;
        const finalScore = score + timeBonus;
        
        winMessage.innerHTML = `
          <div style="font-size: 18px; margin: 16px 0; line-height: 1.8;">
            üéâ Puan: <strong>${finalScore}</strong><br>
            ‚è±Ô∏è S√ºre: ${formatTime(timeElapsed)}<br>
            ‚ö° Bonus: +${timeBonus}<br>
            üë£ Hamle: ${moves}
          </div>
        `;
        
        winModal.classList.remove('hidden');
      }
    }

    // ===== EVENTLER =====
    startBtn.addEventListener('click', startGame);
    resetBtn.addEventListener('click', startGame);
    playAgain.addEventListener('click', startGame);

    // ===== BA≈ûLANGI√á =====
    initName();
    setupGame();
  </script>
</body>
</html>